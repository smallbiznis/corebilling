version: "2"
sql:
  - name: tenant
    engine: postgresql
    queries: internal/tenant/repository/sqlc/queries.sql
    schema: db/migrations/tenant/up
    gen:
      go:
        package: sqlc
        out: internal/tenant/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: customer
    engine: postgresql
    queries: internal/customer/repository/sqlc/queries.sql
    schema: db/migrations/customer/up
    gen:
      go:
        package: sqlc
        out: internal/customer/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: billing
    engine: postgresql
    queries: internal/billing/repository/sqlc/queries.sql
    schema: db/migrations/billing/up
    gen:
      go:
        package: sqlc
        out: internal/billing/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: invoice
    engine: postgresql
    queries: internal/invoice/repository/sqlc/queries.sql
    schema: db/migrations/invoice/up
    gen:
      go:
        package: sqlc
        out: internal/invoice/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: pricing
    engine: postgresql
    queries: internal/pricing/repository/sqlc/queries.sql
    schema: db/migrations/pricing/up
    gen:
      go:
        package: sqlc
        out: internal/pricing/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: rating
    engine: postgresql
    queries: internal/rating/repository/sqlc/queries.sql
    schema: db/migrations/rating/up
    gen:
      go:
        package: sqlc
        out: internal/rating/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: meter
    engine: postgresql
    queries: internal/meter/repository/sqlc/queries.sql
    schema: db/migrations/meter/up
    gen:
      go:
        package: sqlc
        out: internal/meter/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: subscription
    engine: postgresql
    queries: internal/subscription/repository/sqlc/queries.sql
    schema: db/migrations/subscription/up
    gen:
      go:
        package: sqlc
        out: internal/subscription/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: usage
    engine: postgresql
    queries: internal/usage/repository/sqlc/queries.sql
    schema: db/migrations/usage/up
    gen:
      go:
        package: sqlc
        out: internal/usage/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: webhook
    engine: postgresql
    queries: internal/webhook/repository/sqlc/queries.sql
    schema: db/migrations/webhook/up
    gen:
      go:
        package: sqlc
        out: internal/webhook/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - name: idempotency
    engine: postgresql
    queries: internal/idempotency/repository/sqlc/queries.sql
    schema: db/migrations/idempotency/up
    gen:
      go:
        package: sqlc
        out: internal/idempotency/repository/sqlc
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - schema: "db/migrations/quota/up"
    queries: "internal/quota/repository/sqlc/queries.sql"
    engine: "postgresql"
    gen:
      go:
        package: "quotarepo"
        out: "internal/quota/repository/sqlc"
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - schema: "db/migrations/billing_cycle/up"
    queries: "internal/billingcycle/repository/sqlc/queries.sql"
    engine: "postgresql"
    gen:
      go:
        package: "billingcyclerepo"
        out: "internal/billingcycle/repository/sqlc"
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
  - schema: "db/migrations/billing_event/up"   # no new migrations
    queries: "internal/events/replay/repository/sqlc/queries.sql"
    engine: "postgresql"
    gen:
      go:
        package: "sqlc"
        out: "internal/events/replay/repository/sqlc"
        sql_package: "pgx/v5"
        emit_exact_table_names: true
        emit_json_tags: true
        emit_methods_with_db_argument: false
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"